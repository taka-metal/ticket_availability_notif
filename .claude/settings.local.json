{
  "permissions": {
    "allow": [
      "WebFetch(domain:pia.jp)",
      "WebSearch",
      "WebFetch(domain:t.pia.jp)",
      "Bash(git branch -m main)",
      "Bash(git add .gitignore .github/ && git status)",
      "Bash(git commit -m \"add workflow and gitignore\" && git push)",
      "mcp__playwright__browser_navigate",
      "Bash(curl -s -A \"Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36\" \"https://tickets.tbs.co.jp/mundopixar/rsv/\" | head -200)",
      "Bash(curl -s \"https://tickets.tbs.co.jp/mundopixar/rsv/assets/js/main.js\" | head -100)",
      "Bash(curl -s \"https://tickets.tbs.co.jp/mundopixar/rsv/\" | grep -o 'src=\"[^\"]*\\\\.js\"' | head -20)",
      "Bash(curl -s \"https://tickets.tbs.co.jp/mundopixar/rsv/\" | grep -oE 'src=\"[^\"]*\"' | head -20)",
      "Bash(curl -s \"https://tickets.tbs.co.jp/mundopixar/rsv/\" | python3 -c \"import sys,re; content=sys.stdin.read\\(\\); print\\(re.findall\\(r'src=[\\\\\"\\\\']\\(.*?\\)[\\\\\"\\\\'|]', content\\)\\)\")",
      "Bash(curl -sv \"https://tickets.tbs.co.jp/mundopixar/rsv/\" 2>&1 | grep -E \"\\(script|src|js\\)\" | head -20)",
      "Bash(curl -s \"https://tickets.tbs.co.jp/mundopixar/rsv/\" | python3 -c \"\nimport sys\ncontent = sys.stdin.read\\(\\)\n# Find script tags\nimport re\nscripts = re.findall\\(r'<script[^>]*>', content\\)\nfor s in scripts:\n    print\\(s\\)\n\")",
      "Bash(curl -s \"https://tickets.tbs.co.jp/mundopixar/rsv/\" | python3 -c \"\nimport sys\ncontent = sys.stdin.read\\(\\)\nprint\\(repr\\(content[:3000]\\)\\)\n\")",
      "Bash(curl -s -A \"Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36 \\(KHTML, like Gecko\\) Chrome/121.0.0.0 Safari/537.36\" \\\\\n  -H \"Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\" \\\\\n  -H \"Accept-Language: ja-JP,ja;q=0.9\" \\\\\n  \"https://tickets.tbs.co.jp/mundopixar/rsv/\" | python3 -c \"\nimport sys, re\ncontent = sys.stdin.read\\(\\)\n# Find all script tags with src\nscripts = re.findall\\(r'<script[^>]+src=[\\\\\"']\\([^\\\\\"']+\\)[\\\\\"'][^>]*>', content\\)\nprint\\('Scripts:', scripts\\)\n# Find all asset references\nassets = re.findall\\(r'[./]assets/[^\\\\\"' + \\\\\"'\\\\\" + r'> ]+', content\\)\nprint\\('Assets:', assets[:20]\\)\n\")",
      "Bash(python3 -c \"\nimport re\nwith open\\('/tmp/tbs_page.html'\\) as f:\n    content = f.read\\(\\)\n# Find script tags\nscripts = re.findall\\(r'<script[^>]*src=[^>]*>', content\\)\nprint\\('Script tags:', scripts\\)\n# Find JS references\njs_refs = re.findall\\(r'[./]*assets/js/[^\\\\\"\\\\'> ]+', content\\)\nprint\\('JS refs:', js_refs\\)\n\")",
      "Bash(curl -s -A \"Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36 \\(KHTML, like Gecko\\) Chrome/121.0.0.0 Safari/537.36\" \\\\\n  -H \"Referer: https://tickets.tbs.co.jp/mundopixar/rsv/\" \\\\\n  \"https://tickets.tbs.co.jp/mundopixar/rsv/assets/js/main.js\" | head -50)",
      "Bash(curl -s -A \"Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36 \\(KHTML, like Gecko\\) Chrome/121.0.0.0 Safari/537.36\" \\\\\n  -H \"Referer: https://tickets.tbs.co.jp/mundopixar/rsv/\" \\\\\n  \"https://tickets.tbs.co.jp/mundopixar/rsv/assets/js/main.js\" | python3 -c \"\nimport sys, re\ncontent = sys.stdin.read\\(\\)\n# Find API URL references\napi_refs = re.findall\\(r'[\\\\\"\\\\']\\(https?://[^\\\\\"\\\\']+joen[^\\\\\"\\\\']*\\)[\\\\\"\\\\'|]', content, re.IGNORECASE\\)\nprint\\('API refs:', api_refs[:10]\\)\n# Find any JSON or data endpoint\ndata_refs = re.findall\\(r'[\\\\\"\\\\']\\(/[^\\\\\"\\\\']+\\\\.json[^\\\\\"\\\\']*\\)[\\\\\"\\\\'|]', content\\)\nprint\\('JSON refs:', data_refs[:10]\\)\n# Find apiUrl or similar\napi_url = re.findall\\(r'apiUrl[^;\\\\\"\\\\']*[\\\\\"\\\\']\\(.*?\\)[\\\\\"\\\\'|]', content\\)\nprint\\('apiUrl:', api_url[:10]\\)\n# Find fetch calls\nfetches = re.findall\\(r'fetch\\\\\\([\\\\\"\\\\']\\(.*?\\)[\\\\\"\\\\']\\\\\\)', content\\)\nprint\\('fetches:', fetches[:10]\\)\n\")",
      "Bash(curl -s -A \"Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36 \\(KHTML, like Gecko\\) Chrome/121.0.0.0 Safari/537.36\" \\\\\n  -H \"Referer: https://tickets.tbs.co.jp/mundopixar/rsv/\" \\\\\n  \"https://tickets.tbs.co.jp/tbs/json/pixarCalender.json\" | head -100)",
      "Bash(pip install requests==2.32.3 -q && python3 -c \"\nimport requests, json\nfrom datetime import datetime, timezone, timedelta\n\nJST = timezone\\(timedelta\\(hours=9\\)\\)\nCALENDAR_API_URL = 'https://tickets.tbs.co.jp/tbs/json/pixarCalender.json'\nTICKET_PAGE_URL = 'https://tickets.tbs.co.jp/mundopixar/rsv/'\nheaders = {'User-Agent': 'Mozilla/5.0 \\(Windows NT 10.0; Win64; x64\\) AppleWebKit/537.36','Referer': TICKET_PAGE_URL}\n\nresp = requests.get\\(CALENDAR_API_URL, headers=headers, timeout=30\\)\nresp.raise_for_status\\(\\)\n\nnow_str = datetime.now\\(JST\\).strftime\\('%Y%m%d%H%M%S'\\)\nprint\\(f'現在時刻: {now_str}'\\)\ntotal = 0\navailable = []\nfor line in resp.text.strip\\(\\).splitlines\\(\\):\n    record = json.loads\\(line\\)\n    total += 1\n    zanseki = int\\(record.get\\('ZANSEKI', 0\\)\\)\n    if zanseki > 0:\n        available.append\\(record\\)\n\nprint\\(f'全日程数: {total}'\\)\nprint\\(f'ZANSEKI>0の日程: {len\\(available\\)}'\\)\nif available:\n    print\\('空きあり日程:'\\)\n    for r in available:\n        print\\(f\\\\\"  {r['JOEN_DATE']} 残席:{r['ZANSEKI']} 料金:¥{r['MIN_RYOKIN']}\\\\\"\\)\nelse:\n    print\\('現在すべての日程が × \\(ZANSEKI=0\\) です'\\)\n\")",
      "Bash(git add state.json && git rebase --continue)",
      "Bash(GIT_EDITOR=true git rebase --continue)",
      "Bash(git add .claude/settings.local.json && GIT_EDITOR=true git rebase --continue)"
    ]
  }
}
